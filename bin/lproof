#!/usr/bin/env ruby

require 'optparse'
require 'liability-proof'

options = {:file => 'accounts.json'}

OptionParser.new do |opts|
  opts.banner = "Usage: #{$0} [options]"

  opts.on("-g", "--generate", "Generate json of root node and partial trees.") do
    options[:action] = 'generate'
  end

  opts.on("-c", "--check", "check") do
    options[:action] = 'check'
  end

  opts.on("-f", "--file [accounts.json]", "Specify the source file contains accounts data, defaults to accounts.json.") do |f|
    options[:file] = f
  end

  opts.on("-r", "--root root.json", "Specify the root json to check with") do |f|
    options[:root] = f
  end
end.parse!

LiabilityProof::Command.new(options).execute!
